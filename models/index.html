<html>
<head>
  <script src="js/stl_viewer.min.js"></script>
</head>
<body>
<progress id="pbtotal" style="height: 5em;width: 90%;position: absolute;" value="0" max="1"></progress>
<div style="height: 95vh;width: 1208 px;" id="stl_cont"></div>

<script type="text/javascript">
  function load_prog(load_status, load_session) {
    var loaded=0;
    var total=0;

    //go over all models that are/were loaded
    Object.keys(load_status).forEach(function(model_id) {
      //need to make sure we're on the last loading session (not counting previous loaded models)
      if (load_status[model_id].load_session==load_session) {
        loaded+=load_status[model_id].loaded;
        total+=load_status[model_id].total;
      }
    });

    //set total progress bar
    document.getElementById("pbtotal").value=loaded/total;
  }

  function load_done() {
    document.getElementById("pbtotal").style.display = 'none';
  }

  const params = new Proxy(new URLSearchParams(window.location.search), {
    get: (searchParams, prop) => searchParams.get(prop),
  });
  let model = params.model != null ? params.model : "Combined.stl";

  var setup = {
    loading_progress_callback: load_prog,
    all_loaded_callback: load_done,
    models: [
      { 
        id: 0,
        filename: '../' + model,
        color: '#d6d6d6',
        display: 'flat',
      }
    ]
  };

console.log(setup['models'][0]['filename']);
  var stl_viewer=new StlViewer(document.getElementById("stl_cont"), setup);
</script>

Wireframe: <input type="checkbox" onclick="stl_viewer.set_display(0, this.checked ? 'wireframe' : 'flat');" />
Edges: <input type="checkbox" onclick="stl_viewer.set_edges(0, this.checked ? true : false);" />
</body>
